# 磁盘空间管理对话记录

日期：2025年07月07日

## 问题背景
在运行SQL清洗测试时遇到了磁盘空间不足的问题：
```
❌ SQL清洗测试失败: [Errno 28] No space left on device
```

## 问题诊断
1. 检查磁盘使用情况
   - 根目录使用率达到100%，仅剩284MB可用空间
   - 通过`du`命令分析发现主要空间占用：
     * `./saves` 目录：413G
     * `./workflow_output` 目录：7.6G
   - `saves`目录中主要是模型文件：`qwen3-14b-ft-20250704_172810`占用413G

## 解决方案
1. 将大型模型文件迁移到其他存储位置
   - 将`saves`目录移动到`/data/local_disk0/wuyu/save_model/saves`
   - 在原位置创建软链接指向新位置
   - 操作后根目录使用率从100%降至17%

## 具体操作步骤
1. 创建目标目录：
```bash
mkdir -p /data/local_disk0/wuyu/save_model
```

2. 移动文件：
```bash
mv ./saves /data/local_disk0/wuyu/save_model/
```

3. 创建软链接：
```bash
ln -s /data/local_disk0/wuyu/save_model/saves ./saves
```

## 结果验证
- 软链接创建成功：
```bash
ls -la ./saves
lrwxrwxrwx 1 wuyu wuyu 39 Jul 7 14:50 ./saves -> /data/local_disk0/wuyu/save_model/saves
```

- 磁盘空间释放成功：
```bash
df -h .
Filesystem      Size  Used Avail Use% Mounted on
/dev/vda2       512G   80G  411G  17% /
```

## 注意事项
1. 确保访问模型文件时`/data/local_disk0`已正确挂载
2. 软链接方式保持了原有代码的兼容性，无需修改代码中的路径引用 