# 配置文件重组任务总结

## 任务概述
将 `config/data_clean` 和 `config/validation` 重新组织为 `config/data_processing`，按照 `data_processing` 的模块化结构来分类配置文件。

## 执行步骤

### 1. 任务范围确认
- **目标**：重新组织配置文件结构，按照功能模块分类
- **涉及操作**：
  - 将 `config/data_clean` 改名为 `config/data_processing`
  - 将 `config/validation` 移动到 `config/data_processing` 下
  - 按功能模块分类配置文件
  - 更新所有引用路径

### 2. 目录结构重组

#### 2.1 创建新目录结构
```bash
# 创建新的目录结构
mkdir -p config/data_processing/{validation,cleaning,workflow,converter}

# 移动所有文件到新位置
mv config/data_clean/* config/data_processing/
mv config/validation/* config/data_processing/

# 删除旧目录
rm -rf config/data_clean config/validation
```

#### 2.2 按功能分类移动文件

**validation相关文件**：
- `control_flow_validation_prompt.py` → `config/data_processing/validation/`
- `redundant_sql_validation_prompt.py` → `config/data_processing/validation/`
- `validation_prompts.py` → `config/data_processing/validation/`
- `rerun_config.yaml` → `config/data_processing/validation/`

**cleaning相关文件**：
- `sql_completeness_check_prompt.py` → `config/data_processing/cleaning/`
- `special_keyword_prompt.py` → `config/data_processing/cleaning/`
- `keyword_processing_prompt.py` → `config/data_processing/cleaning/`
- `fix_review_prompts.py` → `config/data_processing/cleaning/`

**workflow相关文件**：
- `workflow_config.yaml` → `config/data_processing/workflow/`
- `workflow_config.py` → `config/data_processing/workflow/`

### 3. 导入路径修改

#### 3.1 修改验证器文件
**文件位置**：`data_processing/validation/redundant_sql_validator.py`

**修改内容**：
- 第24行：`from config.data_clean.redundant_sql_validation_prompt import` → `from config.data_processing.validation.redundant_sql_validation_prompt import`
- 第36行：`from config.data_clean.redundant_sql_validation_prompt import` → `from config.data_processing.validation.redundant_sql_validation_prompt import`

**文件位置**：`data_processing/validation/control_flow_validator.py`

**修改内容**：
- 第190行：`from config.data_clean.control_flow_validation_prompt import` → `from config.data_processing.validation.control_flow_validation_prompt import`
- 第364行：`from config.data_clean.control_flow_validation_prompt import` → `from config.data_processing.validation.control_flow_validation_prompt import`

**文件位置**：`data_processing/validation/validator.py`

**修改内容**：
- 第14行：`from config.validation.validation_prompts import` → `from config.data_processing.validation.validation_prompts import`

#### 3.2 修改工作流管理器
**文件位置**：`data_processing/workflow/workflow_manager.py`

**修改内容**：
- 第31行：`from config.data_clean.keyword_processing_prompt import` → `from config.data_processing.cleaning.keyword_processing_prompt import`
- 第269行：`from config.data_clean.sql_completeness_check_prompt import` → `from config.data_processing.cleaning.sql_completeness_check_prompt import`
- 第357行：`from config.data_clean.workflow_config import` → `from config.data_processing.workflow.workflow_config import`
- 第501行：`from config.data_clean.sql_completeness_check_prompt import` → `from config.data_processing.cleaning.sql_completeness_check_prompt import`
- 第566行：`from config.data_clean.workflow_config import` → `from config.data_processing.workflow.workflow_config import`
- 第717行：`from config.data_clean.workflow_config import` → `from config.data_processing.workflow.workflow_config import`
- 第1227行：`from config.data_clean.fix_review_prompts import` → `from config.data_processing.cleaning.fix_review_prompts import`
- 第1292行：`from config.data_clean.special_keyword_prompt import` → `from config.data_processing.cleaning.special_keyword_prompt import`
- 第1343行：`from config.data_clean.special_keyword_prompt import` → `from config.data_processing.cleaning.special_keyword_prompt import`
- 第2291行：`from config.data_clean.workflow_config import` → `from config.data_processing.workflow.workflow_config import`
- 第2342行：`from config.data_clean.workflow_config import` → `from config.data_processing.workflow.workflow_config import`

#### 3.3 修改配置文件
**文件位置**：`config/data_processing/workflow/workflow_config.py`

**修改内容**：
- 第51行：`config_file: str = "config/data_clean/workflow_config.yaml"` → `config_file: str = "config/data_processing/workflow/workflow_config.yaml"`

#### 3.4 修改工作流管理器中的配置路径
**文件位置**：`data_processing/workflow/workflow_manager.py`

**修改内容**：
- 第2016行：`validator_config_path: str = "config/validation/rerun_config.yaml"` → `validator_config_path: str = "config/data_processing/validation/rerun_config.yaml"`

### 4. 验证结果

#### 4.1 目录结构验证
```
config/data_processing/
├── __init__.py
├── validation/
│   ├── control_flow_validation_prompt.py
│   ├── redundant_sql_validation_prompt.py
│   ├── validation_prompts.py
│   └── rerun_config.yaml
├── cleaning/
│   ├── sql_completeness_check_prompt.py
│   ├── special_keyword_prompt.py
│   ├── keyword_processing_prompt.py
│   └── fix_review_prompts.py
├── workflow/
│   ├── workflow_config.yaml
│   └── workflow_config.py
└── converter/
    └── (预留给转换器配置)
```

#### 4.2 导入路径验证
- ✅ 所有验证器文件中的导入路径已更新
- ✅ 工作流管理器中的所有导入路径已更新
- ✅ 配置文件中的路径引用已更新
- ✅ 旧目录已删除

## 变更总结

### 移动的文件
1. **validation模块**：
   - `control_flow_validation_prompt.py`
   - `redundant_sql_validation_prompt.py`
   - `validation_prompts.py`
   - `rerun_config.yaml`

2. **cleaning模块**：
   - `sql_completeness_check_prompt.py`
   - `special_keyword_prompt.py`
   - `keyword_processing_prompt.py`
   - `fix_review_prompts.py`

3. **workflow模块**：
   - `workflow_config.yaml`
   - `workflow_config.py`

### 修改的文件
1. `data_processing/validation/redundant_sql_validator.py` - 更新2个导入路径
2. `data_processing/validation/control_flow_validator.py` - 更新2个导入路径
3. `data_processing/validation/validator.py` - 更新1个导入路径
4. `data_processing/workflow/workflow_manager.py` - 更新10个导入路径
5. `config/data_processing/workflow/workflow_config.py` - 更新1个配置路径

### 删除的目录
1. `config/data_clean/` - 已删除
2. `config/validation/` - 已删除

## 模块化优势

### 1. 功能分组清晰
- **validation模块**：专门处理数据验证相关的prompt和配置
- **cleaning模块**：专门处理数据清洗相关的prompt和配置
- **workflow模块**：专门处理工作流相关的配置
- **converter模块**：预留给数据转换器相关配置

### 2. 导入路径统一
现在所有配置文件的导入路径都遵循统一的模式：
```python
# 验证相关
from config.data_processing.validation import ...

# 清洗相关
from config.data_processing.cleaning import ...

# 工作流相关
from config.data_processing.workflow import ...
```

### 3. 维护性提升
- 相关配置文件集中在同一目录
- 便于后续添加新的配置类型
- 清晰的模块边界和职责划分

## 注意事项
- 所有导入路径已成功更新
- 文件移动操作已完成
- 配置文件功能保持不变，仅位置发生变化
- 新增了模块化的目录结构，便于后续扩展

## 任务完成状态
✅ **任务完成** - 所有配置文件已成功重新组织到 `config/data_processing/` 目录下，按功能模块分类，所有引用路径已更新 