# 2025-07-21 关键词LLM分析批量导出

## 需求

- 在WorkflowManager中新增方法，实现：
  1. 从指定文件加载数据（JSON，记录列表）
  2. 调用extract_keyword_data，use_llm=True，对所有数据进行LLM关键词分析
  3. 不论是否匹配到关键词，所有记录都保留（含关键词和不含关键词的都输出）
  4. 将所有分析后的数据（含llm分析字段）输出到final（如final_processed_data.json）
- 新增run_keyword_judge.py脚本，支持命令行参数，调用上述方法并输出结果

## 方案与实现

### 1. WorkflowManager类新增方法
- 方法名：extract_keywords_from_file_and_export_all
- 参数：input_file, output_file（默认final_processed_data.json）
- 步骤：
  1. 读取input_file，赋值self.current_data
  2. await extract_keyword_data(keywords=None, step_name="keyword_extraction_llm_export", use_llm=True)
  3. 导出self.current_data到output_file（含所有llm分析字段）
- 只涉及workflow_manager.py，不影响下游流程

### 2. 新增run_keyword_judge.py脚本
- 支持参数：--input 输入文件，--output 输出文件（可选），--output_dir 输出目录
- 初始化WorkflowManager，调用extract_keywords_from_file_and_export_all
- 输出所有分析后数据的路径

## 变更文件

- data_processing/workflow/workflow_manager.py
  - 新增extract_keywords_from_file_and_export_all方法
- data_processing/workflow/run_keyword_judge.py
  - 新建命令行脚本，支持批量LLM关键词分析与导出

## 风险与假设
- 假设输入文件为标准JSON记录列表
- 只读写指定文件，不影响其他流程
- 只新增方法和脚本，不更改现有结构

## 交付说明
- 以上功能已实现，符合生产级最小变更原则。 